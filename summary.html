<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SoÃ±ora Samenvatting</title>
<style>
:root{
  --bg:#FBF5E9;
  --accent:#F3814B;
  --text:#122F4D;
}
body{
  margin:0;
  background:var(--bg);
  font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
  padding:20px;
  overflow:hidden;
}

/* Kaart */
.summary{
  background:white;
  border-radius:16px;
  box-shadow:0 4px 12px rgba(0,0,0,0.08);
  overflow:hidden;
  max-width:400px;
  margin:auto;
  display:flex;
  flex-direction:column;
  transition:transform .4s ease, box-shadow .3s ease;
}
.summary.active{
  transform:translateY(-5px);
  box-shadow:0 6px 20px rgba(0,0,0,0.12);
}
.sum-head{
  background:#122F4D;
  color:white;
  padding:20px;
}
.sum-head h3{margin:0;font-size:1.3rem;}
.sum-head p{margin:4px 0 0;opacity:0.9;}
.sum-body{
  padding:20px;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.line{
  display:flex;
  justify-content:space-between;
}
.total{
  font-weight:700;
  font-size:1.1rem;
  border-top:1px solid #eee;
  padding-top:10px;
}
button{
  margin-top:20px;
  background:var(--accent);
  border:none;
  border-radius:8px;
  color:white;
  font-weight:600;
  padding:12px;
  cursor:pointer;
  transition:.2s;
}
button:hover{filter:brightness(.95);}
.footer{
  text-align:center;
  font-size:.85rem;
  color:#666;
  padding:10px;
}
</style>
</head>
<body>

<div class="summary" id="summaryBox">
  <div class="sum-head">
    <h3>Jouw verblijf bij SoÃ±ora</h3>
    <p>Boek direct je zonnige ontsnapping ðŸŒ´</p>
  </div>

  <div class="sum-body">
    <div class="line"><span>Check-in</span><span id="in">-</span></div>
    <div class="line"><span>Check-out</span><span id="out">-</span></div>
    <div class="line"><span>Aantal nachten</span><span id="nights">0</span></div>
    <div class="line"><span>Prijs per nacht</span><span>â‚¬ 75</span></div>
    <div class="line"><span>Schoonmaakkosten</span><span>â‚¬ 90</span></div>
    <div class="line"><span>Toeristenbelasting</span><span>â‚¬ 31,50</span></div>
    <div class="line total"><span>Totaal</span><span id="total">â‚¬ 0,00</span></div>
    <button id="bookBtn">Boek nu</button>
  </div>

  <div class="footer">
    Geen aanbetaling nodig. Gratis annuleren tot 30 dagen voor aankomst.
  </div>
</div>

<script>
const box     = document.getElementById("summaryBox");
const elIn    = document.getElementById("in");
const elOut   = document.getElementById("out");
const elN     = document.getElementById("nights");
const elTotal = document.getElementById("total");
const btn     = document.getElementById("bookBtn");

/* Ontvang live updates van calendar.html */
window.addEventListener("message", (e)=>{
  if(e.data.type!=="updateSummary") return;

  // Toon geanimeerde highlight
  box.classList.add("active");
  clearTimeout(box._timer);
  box._timer=setTimeout(()=>box.classList.remove("active"),800);

  elIn.textContent    = e.data.checkIn || "-";
  elOut.textContent   = e.data.checkOut || "-";
  elN.textContent     = e.data.nights || 0;
  elTotal.textContent = "â‚¬ " + (e.data.total||0).toFixed(2);
});

/* Boekknop â†’ stuur data naar bovenliggende pagina (index.html) */
btn.onclick = ()=>{
  const payload = {
    type: "openBookingForm",
    checkIn : elIn.textContent,
    checkOut: elOut.textContent,
    nights  : elN.textContent,
    total   : elTotal.textContent
  };
  window.top.postMessage(payload,"*");
};
</script>
</body>
</html>
